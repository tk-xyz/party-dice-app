<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Dice or Duty</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <!-- Mistik baÅŸlÄ±k fontu -->
  <link href="https://fonts.googleapis.com/css2?family=Cinzel+Decorative:wght@400;700&display=swap" rel="stylesheet">

  <style>
    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      background: radial-gradient(circle at top, #25213b, #05040a);
      color: #f5f5f5;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    }

    .app {
      width: 100%;
      max-width: 420px;
      padding: 20px 18px 28px;
      border-radius: 18px;
      background: rgba(10, 9, 20, 0.92);
      box-shadow: 0 18px 40px rgba(0, 0, 0, 0.6);
      border: 1px solid rgba(255, 255, 255, 0.08);
    }

    h1 {
      margin: 0 0 12px;
      text-align: center;
      font-family: "Cinzel Decorative", system-ui;
      font-weight: 700;
      letter-spacing: 0.08em;
      font-size: 1.3rem;
      text-transform: uppercase;
      color: #f5d76e;
      text-shadow: 0 0 10px rgba(245, 215, 110, 0.6);
    }

    .subtitle {
      text-align: center;
      font-size: 0.9rem;
      color: #c5c5e0;
      margin-bottom: 16px;
    }

    .mode-toggle {
      display: flex;
      gap: 8px;
      margin-bottom: 16px;
    }

    .mode-toggle button {
      flex: 1;
      padding: 8px 10px;
      border-radius: 999px;
      border: 1px solid rgba(255, 255, 255, 0.15);
      background: rgba(255, 255, 255, 0.03);
      color: #e4e4ff;
      font-size: 0.9rem;
      cursor: pointer;
      transition: background 0.2s ease, border-color 0.2s ease, transform 0.1s ease;
    }

    .mode-toggle button.active {
      background: linear-gradient(135deg, #f5d76e, #ff9f43);
      border-color: transparent;
      color: #1a1025;
      font-weight: 600;
      box-shadow: 0 0 12px rgba(245, 215, 110, 0.7);
    }

    .mode-toggle button:active {
      transform: scale(0.97);
    }

    .section {
      border-radius: 14px;
      padding: 12px 12px 14px;
      background: rgba(20, 17, 38, 0.9);
      border: 1px solid rgba(255, 255, 255, 0.06);
      margin-bottom: 10px;
    }

    .section-title {
      font-size: 0.9rem;
      font-weight: 600;
      color: #f5d76e;
      margin-bottom: 8px;
    }

    .field-row {
      display: flex;
      align-items: center;
      gap: 8px;
      margin-bottom: 10px;
    }

    label {
      font-size: 0.85rem;
      color: #cfd0ff;
      white-space: nowrap;
    }

    input[type="number"],
    input[type="text"] {
      flex: 1;
      padding: 7px 10px;
      border-radius: 999px;
      border: 1px solid rgba(255, 255, 255, 0.15);
      background: rgba(4, 5, 17, 0.9);
      color: #f5f5ff;
      font-size: 0.9rem;
      outline: none;
    }

    input[type="text"] {
      border-radius: 10px;
    }

    input::placeholder {
      color: #8181a8;
    }

    .primary-btn {
      padding: 7px 14px;
      border-radius: 999px;
      border: none;
      background: linear-gradient(135deg, #ff9f43, #f368e0);
      color: #1a1025;
      font-weight: 600;
      font-size: 0.9rem;
      cursor: pointer;
      white-space: nowrap;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 4px;
      box-shadow: 0 0 12px rgba(255, 159, 67, 0.6);
      transition: transform 0.1s ease, box-shadow 0.15s ease;
    }

    .primary-btn:active {
      transform: scale(0.97);
      box-shadow: 0 0 6px rgba(255, 159, 67, 0.4);
    }

    .dice-area {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      margin-top: 10px;
      min-height: 160px;
    }

    .dice-container {
      min-height: 130px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .dice {
      width: 120px;
      height: 120px;
      transition: transform 0.25s ease-in-out;
      filter: drop-shadow(0 0 12px rgba(0, 0, 0, 0.7));
    }

    .dice.rolling {
      animation: spin 0.2s linear infinite;
    }

    .dice.stopped {
      animation: bounce 0.4s ease-out;
    }

    .classic-number-result {
      font-size: 2.8rem;
      font-weight: 700;
      color: #f5d76e;
      text-shadow: 0 0 18px rgba(245, 215, 110, 0.9);
    }

    .classic-help {
      font-size: 0.8rem;
      color: #9090c0;
      margin-top: 6px;
      text-align: center;
    }

    .tasks-info {
      font-size: 0.8rem;
      color: #a9a9d8;
      margin-bottom: 8px;
    }

    .tasks-grid {
      display: flex;
      flex-direction: column;
      gap: 6px;
      max-height: 160px;
      overflow-y: auto;
      padding-right: 2px;
      margin-bottom: 8px;
    }

    .duty-result {
      margin-top: 8px;
      min-height: 72px;
      border-radius: 12px;
      border: 1px dashed rgba(245, 215, 110, 0.4);
      background: radial-gradient(circle at top, rgba(245, 215, 110, 0.1), transparent);
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 10px;
      text-align: center;
      font-family: "Cinzel Decorative", system-ui;
      font-size: 1.1rem;
      color: #f5d76e;
      overflow-wrap: anywhere;
      word-break: break-word;
    }

    .duty-result.empty {
      color: #7d7daa;
      font-size: 0.9rem;
      font-family: system-ui, sans-serif;
    }

    .warning {
      font-size: 0.8rem;
      color: #ff7675;
      margin-top: 4px;
      text-align: left;
    }

    .footer-note {
      margin-top: 8px;
      font-size: 0.7rem;
      text-align: center;
      color: #7777a5;
    }

    @keyframes spin {
      from {
        transform: rotate(0deg) scale(1);
      }
      to {
        transform: rotate(360deg) scale(1.03);
      }
    }

    @keyframes bounce {
      0% {
        transform: scale(1);
      }
      50% {
        transform: scale(1.18);
      }
      100% {
        transform: scale(1);
      }
    }

    @media (max-width: 380px) {
      .app {
        padding: 16px 12px 22px;
      }
      .dice {
        width: 96px;
        height: 96px;
      }
      .classic-number-result {
        font-size: 2.3rem;
      }
    }
  </style>
</head>
<body>
  <div class="app">
    <h1 id="title">Dice or Duty</h1>
    <div id="subtitle" class="subtitle">
      Roll the dice or write your own challenges â€” let fate decide.
    </div>

    <div class="mode-toggle">
      <button id="classicBtn" class="active">Classic</button>
      <button id="customBtn">Custom</button>
    </div>

    <!-- Klasik Zar Modu -->
    <div id="classicSection" class="section">
      <div class="section-title" id="classicTitle">Classic Dice</div>
      <div class="field-row">
        <label for="classicSides" id="sidesLabel">Sides</label>
        <input id="classicSides" type="number" min="1" max="50" value="6" />
        <button id="classicRollBtn" class="primary-btn">
          <span id="rollText">Roll</span> ðŸŽ²
        </button>
      </div>
      <div class="dice-area">
        <div id="diceContainer" class="dice-container"></div>
        <div id="classicNumberResult" class="classic-number-result"></div>
        <div class="classic-help" id="classicHelp">
          Up to 6 sides uses the red dice. Above 6 shows only the number.
        </div>
      </div>
    </div>

    <!-- Ã–zel GÃ¶rev Modu -->
    <div id="customSection" class="section" style="display:none;">
      <div class="section-title" id="customTitle">Custom Duties</div>
      <div class="field-row">
        <label for="customSides" id="customSidesLabel">Number of duties</label>
        <input id="customSides" type="number" min="2" max="12" value="4" />
        <button id="setTasksBtn" class="primary-btn">
          <span id="setTasksText">Set</span>
        </button>
      </div>
      <div id="tasksInfo" class="tasks-info">
        Write your tasks below. Empty ones will be ignored.
      </div>
      <div id="tasksContainer" class="tasks-grid"></div>
      <button id="customRollBtn" class="primary-btn" style="width:100%; margin-top:4px;">
        <span id="customRollText">Reveal my duty âœ¨</span>
      </button>
      <div id="tasksWarning" class="warning" style="display:none;"></div>
      <div id="dutyResult" class="duty-result empty">
        <span id="dutyResultText">No duty selected yet.</span>
      </div>
    </div>

    <div class="footer-note">
      No account. No data collection. Just a simple little fate game.
    </div>
  </div>

  <script>
    const diceImages = ["1.png", "2.png", "3.png", "4.png", "5.png", "6.png"];

    const translations = {
      en: {
        title: "Dice or Duty",
        subtitle: "Roll the dice or write your own challenges â€” let fate decide.",
        classic: "Classic",
        custom: "Custom",
        classicTitle: "Classic Dice",
        customTitle: "Custom Duties",
        sidesLabel: "Sides",
        classicHelp: "Up to 6 sides uses the red dice. Above 6 shows only the number.",
        roll: "Roll",
        customSidesLabel: "Number of duties",
        setTasks: "Set",
        tasksInfo: "Write your tasks below. Empty ones will be ignored.",
        reveal: "Reveal my duty âœ¨",
        noTasks: "Please write at least one duty.",
        emptyDuty: "No duty selected yet.",
        footer: "No account. No data collection. Just a simple little fate game.",
        taskPlaceholder: i => "Task " + i
      },
      tr: {
        title: "Dice or Duty",
        subtitle: "Zar at ya da kendi gÃ¶revini yaz â€” kaderine razÄ± ol.",
        classic: "Klasik",
        custom: "Ã–zel",
        classicTitle: "Klasik Zar",
        customTitle: "Ã–zel GÃ¶revler",
        sidesLabel: "YÃ¼z sayÄ±sÄ±",
        classicHelp: "6 yÃ¼z ve altÄ± iÃ§in kÄ±rmÄ±zÄ± zar gÃ¶sterilir. Ãœzeri iÃ§in sadece sayÄ± yazÄ±lÄ±r.",
        roll: "At",
        customSidesLabel: "GÃ¶rev sayÄ±sÄ±",
        setTasks: "OluÅŸtur",
        tasksInfo: "AÅŸaÄŸÄ±ya gÃ¶revlerini yaz. BoÅŸ olanlar yok sayÄ±lÄ±r.",
        reveal: "GÃ¶revimi gÃ¶ster âœ¨",
        noTasks: "En az bir gÃ¶rev yazmalÄ±sÄ±n.",
        emptyDuty: "HenÃ¼z bir gÃ¶rev seÃ§ilmedi.",
        footer: "KayÄ±t yok. Veri toplama yok. Sadece kÃ¼Ã§Ã¼k bir kader oyunu.",
        taskPlaceholder: i => "GÃ¶rev " + i
      }
    };

    let lang = "en";

    document.addEventListener("DOMContentLoaded", () => {
      // ---- Ses: Web Audio ile kÄ±sa "tÄ±k" efekti ----
      let audioCtx;

      async function  playDiceSound() {
        try {
          const AudioContext = window.AudioContext || window.webkitAudioContext;
          if (!AudioContext) return;

          if (!audioCtx) {
            audioCtx = new AudioContext();
          }

           if (audioCtx.s=tate === "suspended") {
      await audioCtx.resume();
    }
   const osc = audioCtx.createOscillator();
          const gain = audioCtx.createGain();

          osc.type = "square";
          osc.frequency.value = 450; // tÄ±k sesi

          const now = audioCtx.currentTime;
          gain.gain.setValueAtTime(0.25, now);
          gain.gain.exponentialRampToValueAtTime(0.001, now + 0.25);

          osc.connect(gain);
          gain.connect(audioCtx.destination);

          osc.start(now);
          osc.stop(now + 0.25);
        } catch (e) {
          // sessizce geÃ§
        }
      }

      // Dil tespiti
      const navLang = (navigator.language || navigator.userLanguage || "en").toLowerCase();
      lang = navLang.startsWith("tr") ? "tr" : "en";

      // Element referanslarÄ±
      const titleEl = document.getElementById("title");
      const subtitleEl = document.getElementById("subtitle");
      const classicBtn = document.getElementById("classicBtn");
      const customBtn = document.getElementById("customBtn");
      const classicSection = document.getElementById("classicSection");
      const customSection = document.getElementById("customSection");

      const classicTitle = document.getElementById("classicTitle");
      const customTitle = document.getElementById("customTitle");
      const sidesLabel = document.getElementById("sidesLabel");
      const classicHelp = document.getElementById("classicHelp");
      const rollText = document.getElementById("rollText");
      const customSidesLabel = document.getElementById("customSidesLabel");
      const setTasksText = document.getElementById("setTasksText");
      const tasksInfo = document.getElementById("tasksInfo");
      const customRollText = document.getElementById("customRollText");
      const dutyResultText = document.getElementById("dutyResultText");
      const footerNote = document.querySelector(".footer-note");

      const classicSidesInput = document.getElementById("classicSides");
      const classicRollBtn = document.getElementById("classicRollBtn");
      const diceContainer = document.getElementById("diceContainer");
      const classicNumberResult = document.getElementById("classicNumberResult");

      const customSidesInput = document.getElementById("customSides");
      const setTasksBtn = document.getElementById("setTasksBtn");
      const tasksContainer = document.getElementById("tasksContainer");
      const customRollBtn = document.getElementById("customRollBtn");
      const tasksWarning = document.getElementById("tasksWarning");
      const dutyResult = document.getElementById("dutyResult");

      // Ã‡evirileri uygula
      function applyTranslations() {
        const t = translations[lang];
        titleEl.textContent = t.title;
        subtitleEl.textContent = t.subtitle;
        classicBtn.textContent = t.classic;
        customBtn.textContent = t.custom;
        classicTitle.textContent = t.classicTitle;
        customTitle.textContent = t.customTitle;
        sidesLabel.textContent = t.sidesLabel;
        classicHelp.textContent = t.classicHelp;
        rollText.textContent = t.roll;
        customSidesLabel.textContent = t.customSidesLabel;
        setTasksText.textContent = t.setTasks;
        tasksInfo.textContent = t.tasksInfo;
        customRollText.textContent = t.reveal;
        dutyResultText.textContent = t.emptyDuty;
        footerNote.textContent = t.footer;
      }

      applyTranslations();

      // Mod deÄŸiÅŸtirme
      function showClassic() {
        classicBtn.classList.add("active");
        customBtn.classList.remove("active");
        classicSection.style.display = "block";
        customSection.style.display = "none";
      }

      function showCustom() {
        customBtn.classList.add("active");
        classicBtn.classList.remove("active");
        classicSection.style.display = "none";
        customSection.style.display = "block";
      }

      classicBtn.addEventListener("click", showClassic);
      customBtn.addEventListener("click", showCustom);

      // Klasik zar atma
      function rollDice() {
      // >>> Ses Ã§alma (bunu ekliyorsun)
      const diceSound = document.getElementById("dice-sound");
      if (diceSound) { diceSound.currentTime = 0;
         diceSound.play();
     }
     // <<< Ses Ã§alma

        const sides = Math.max(1, parseInt(classicSidesInput.value, 10) || 1);
        classicSidesInput.value = sides;
        diceContainer.innerHTML = "";
        classicNumberResult.textContent = "";

        const isImageMode = sides <= 6;

        if (isImageMode) {
          const diceEl = document.createElement("img");
          diceEl.className = "dice rolling";
          diceEl.src = diceImages[0];
          diceContainer.appendChild(diceEl);

          const rollDuration = 2000;
          const interval = 100;
          const start = Date.now();

          const timer = setInterval(() => {
            const randomValue = Math.floor(Math.random() * sides) + 1;
            diceEl.src = diceImages[randomValue - 1];
            diceEl.style.transform = "rotate(" + Math.random() * 360 + "deg)";

            if (Date.now() - start >= rollDuration) {
              clearInterval(timer);
              const finalValue = Math.floor(Math.random() * sides) + 1;
              diceEl.src = diceImages[finalValue - 1];
              diceEl.classList.remove("rolling");
              diceEl.classList.add("stopped");
              diceEl.style.transform = "rotate(0deg)";
            }
          }, interval);
        } else {
          const rollDuration = 2000;
          const interval = 100;
          const start = Date.now();

          const tempSpan = document.createElement("div");
          tempSpan.className = "classic-number-result";
          diceContainer.innerHTML = "";
          diceContainer.appendChild(tempSpan);

          const timer = setInterval(() => {
            const randomValue = Math.floor(Math.random() * sides) + 1;
            tempSpan.textContent = randomValue;

            if (Date.now() - start >= rollDuration) {
              clearInterval(timer);
              const finalValue = Math.floor(Math.random() * sides) + 1;
              tempSpan.textContent = finalValue;
            }
          }, interval);
        }
      }

      classicRollBtn.addEventListener("click", rollDice);

      // Ã–zel gÃ¶rev alanlarÄ±nÄ± oluÅŸturma
      function buildTasksInputs() {
        const sides = Math.max(2, Math.min(12, parseInt(customSidesInput.value, 10) || 2));
        customSidesInput.value = sides;
        tasksContainer.innerHTML = "";
        const t = translations[lang];

        for (let i = 1; i <= sides; i++) {
          const input = document.createElement("input");
          input.type = "text";
          input.placeholder = t.taskPlaceholder(i);
          tasksContainer.appendChild(input);
        }
        tasksWarning.style.display = "none";
        dutyResult.classList.add("empty");
        dutyResultText.textContent = t.emptyDuty;
      }

      setTasksBtn.addEventListener("click", buildTasksInputs);

      // Ä°lk aÃ§Ä±lÄ±ÅŸta default inputlarÄ± oluÅŸtur
      buildTasksInputs();

      // Ã–zel gÃ¶rev seÃ§me
      function rollDuty() {
     



        const inputs = Array.from(tasksContainer.querySelectorAll("input[type='text']"));
        const t = translations[lang];
        const nonEmpty = inputs
          .map(input => input.value.trim())
          .filter(v => v.length > 0);

        if (nonEmpty.length === 0) {
          tasksWarning.textContent = t.noTasks;
          tasksWarning.style.display = "block";
          dutyResult.classList.add("empty");
          dutyResultText.textContent = t.emptyDuty;
          return;
        }

        tasksWarning.style.display = "none";

        // KÄ±sa "karma" animasyonu
        const rollDuration = 1200;
        const interval = 100;
        const start = Date.now();

        dutyResult.classList.remove("empty");
        dutyResultText.style.opacity = "0.8";

        const timer = setInterval(() => {
          const randomValue = nonEmpty[Math.floor(Math.random() * nonEmpty.length)];
          dutyResultText.textContent = randomValue.toUpperCase();
          if (Date.now() - start >= rollDuration) {
            clearInterval(timer);
            const finalValue = nonEmpty[Math.floor(Math.random() * nonEmpty.length)];
            dutyResultText.textContent = finalValue.toUpperCase();
            dutyResultText.style.opacity = "1";
          }
        }, interval);
      }

      customRollBtn.addEventListener("click", rollDuty);
    });
  </script>
<audio id="dice-sound" src="dice.mp3" preload="auto"></audio>

</body>
</html>
